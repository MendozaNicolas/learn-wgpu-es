(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{328:function(a,s){a.exports="data:image/png;base64,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IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAOiECAADUCREAAKBOiAAAAHVCBAAAqBMiAABAnRABAADqhAgAAFAnRAAAgDohAgAA1AkRAACgTogAAAB1QgQAAKgTIgAAQJ0QAQAA6oQIAABQJ0QAAIA6IQIAANQJEQAAoE6IAAAAdUIEAACoEyIAAECdEAEAAOqECAAAUCdEAACAuqkk2b5udKHnAAAAfob8P4Fe1tYvSjndAAAAAElFTkSuQmCC"},329:function(a,s,t){a.exports=t.p+"assets/img/no-clear.753f913f.png"},404:function(a,s,t){"use strict";t.r(s);var n=t(14),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"la-superficie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#la-superficie"}},[a._v("#")]),a._v(" La Superficie")]),a._v(" "),s("h2",{attrs:{id:"primero-un-poco-de-limpieza-state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#primero-un-poco-de-limpieza-state"}},[a._v("#")]),a._v(" Primero, un poco de limpieza: State")]),a._v(" "),s("p",[a._v("Creamos state en el tutorial anterior, ahora pongamos cosas\nen él.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// lib.rs")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("pub")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("struct")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token type-definition class-name"}},[a._v("State")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    surface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Surface")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token lifetime-annotation symbol"}},[a._v("'static")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Device")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Queue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("SurfaceConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    is_surface_configured"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("bool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Arc")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Window")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("Estoy simplificando los campos de "),s("code",[a._v("State")]),a._v(", pero tendrán más sentido cuando explique el código detrás de estos métodos.")]),a._v(" "),s("h2",{attrs:{id:"state-new"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#state-new"}},[a._v("#")]),a._v(" State::new()")]),a._v(" "),s("p",[a._v("El código para esto es bastante directo, pero vamos a desglosarlo un poco.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("impl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("State")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// ...")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("async")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[a._v("new")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Arc")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Window")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("->")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("anyhow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Result")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("State")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" size "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("inner_size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// La instancia es un manejador de nuestra GPU")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// BackendBit::PRIMARY => Vulkan + Metal + DX12 + Browser WebGPU")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Instance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("new")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("InstanceDescriptor")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[a._v("#[cfg(not(target_arch = "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"wasm32"')]),a._v("))]")]),a._v("\n            backends"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Backends")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("PRIMARY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[a._v("#[cfg(target_arch = "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"wasm32"')]),a._v(")]")]),a._v("\n            backends"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Backends")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("GL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" surface "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("create_surface")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("clone")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("unwrap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" adapter "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" instance\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("request_adapter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("RequestAdapterOptions")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                power_preference"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("PowerPreference")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                compatible_surface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Some")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("surface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                force_fallback_adapter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("await")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// ...")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("h3",{attrs:{id:"instance-y-adapter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-y-adapter"}},[a._v("#")]),a._v(" Instance y Adapter")]),a._v(" "),s("p",[a._v("La "),s("code",[a._v("instance")]),a._v(" es lo primero que creas cuando usas wgpu. Su propósito principal\nes crear "),s("code",[a._v("Adapter")]),a._v("s y "),s("code",[a._v("Surface")]),a._v("s.")]),a._v(" "),s("p",[a._v("El "),s("code",[a._v("adapter")]),a._v(" es un manejador de nuestra tarjeta gráfica real. Puedes usarlo para obtener información sobre la tarjeta gráfica, como su nombre y qué backend usa el adaptador. Lo usamos para crear nuestro "),s("code",[a._v("Device")]),a._v(" y "),s("code",[a._v("Queue")]),a._v(" más adelante. Vamos a discutir los campos de "),s("code",[a._v("RequestAdapterOptions")]),a._v(".")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("power_preference")]),a._v(" tiene dos variantes: "),s("code",[a._v("LowPower")]),a._v(" e "),s("code",[a._v("HighPerformance")]),a._v(". "),s("code",[a._v("LowPower")]),a._v(" elegirá un adaptador que favorezca la duración de la batería, como una GPU integrada. "),s("code",[a._v("HighPerformance")]),a._v(" elegirá un adaptador para GPUs más potentes pero que consumen más, como una tarjeta gráfica dedicada. WGPU favorecerá "),s("code",[a._v("LowPower")]),a._v(" si no hay un adaptador para la opción "),s("code",[a._v("HighPerformance")]),a._v(".")]),a._v(" "),s("li",[a._v("El campo "),s("code",[a._v("compatible_surface")]),a._v(" le dice a wgpu que encuentre un adaptador que pueda presentarse a la superficie suministrada.")]),a._v(" "),s("li",[a._v("El "),s("code",[a._v("force_fallback_adapter")]),a._v(' obliga a wgpu a elegir un adaptador que funcionará en todo el hardware. Esto generalmente significa que el backend de renderizado usará un sistema "software" en lugar de hardware como una GPU.')])]),a._v(" "),s("div",{staticClass:"note"},[s("p",[a._v("Las opciones que pasé a "),s("code",[a._v("request_adapter")]),a._v(" no están garantizadas para funcionar en todos los dispositivos, pero funcionarán en la mayoría. Si wgpu no puede encontrar un adaptador con los permisos requeridos, "),s("code",[a._v("request_adapter")]),a._v(" devolverá "),s("code",[a._v("None")]),a._v(". Si quieres obtener todos los adaptadores para un backend particular, puedes usar "),s("code",[a._v("enumerate_adapters")]),a._v(". Esto te dará un iterador que puedes recorrer para verificar si uno de los adaptadores funciona para tus necesidades.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" adapter "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" instance\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("enumerate_adapters")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Backends")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("all")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token closure-params"}},[s("span",{pre:!0,attrs:{class:"token closure-punctuation punctuation"}},[a._v("|")]),a._v("adapter"),s("span",{pre:!0,attrs:{class:"token closure-punctuation punctuation"}},[a._v("|")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Verifica si este adaptador soporta nuestra superficie")]),a._v("\n        adapter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("is_surface_supported")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("surface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("unwrap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("p",[a._v("Una cosa a notar es que "),s("code",[a._v("enumerate_adapters")]),a._v(" no está disponible en WASM, así que tienes que usar "),s("code",[a._v("request_adapter")]),a._v(".")]),a._v(" "),s("p",[a._v("Otra cosa a notar es que los "),s("code",[a._v("Adapter")]),a._v("s están bloqueados a un backend específico. Si estás en Windows y tienes dos tarjetas gráficas, tendrás al menos cuatro adaptadores disponibles para usar: 2 Vulkan y 2 DirectX.")]),a._v(" "),s("p",[a._v("Para más campos que puedes usar para refinar tu búsqueda, "),s("a",{attrs:{href:"https://docs.rs/wgpu/latest/wgpu/struct.Adapter.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("consulta la documentación"),s("OutboundLink")],1),a._v(".")])]),a._v(" "),s("h3",{attrs:{id:"la-superficie-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#la-superficie-2"}},[a._v("#")]),a._v(" La Superficie")]),a._v(" "),s("p",[a._v("La "),s("code",[a._v("surface")]),a._v(" es la parte de la ventana en la que dibujamos. La necesitamos para dibujar directamente en la pantalla. Nuestra "),s("code",[a._v("window")]),a._v(" necesita implementar el trait "),s("code",[a._v("HasRawWindowHandle")]),a._v(" de "),s("a",{attrs:{href:"https://crates.io/crates/raw-window-handle",target:"_blank",rel:"noopener noreferrer"}},[a._v("raw-window-handle"),s("OutboundLink")],1),a._v(" para crear una superficie. Afortunadamente, la "),s("code",[a._v("Window")]),a._v(" de winit es perfecta para esto. También la necesitamos para solicitar nuestro "),s("code",[a._v("adapter")]),a._v(".")]),a._v(" "),s("h3",{attrs:{id:"device-y-queue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#device-y-queue"}},[a._v("#")]),a._v(" Device y Queue")]),a._v(" "),s("p",[a._v("Usemos el "),s("code",[a._v("adapter")]),a._v(" para crear el device y la queue.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[a._v("        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" adapter\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("request_device")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DeviceDescriptor")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                label"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("None")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                required_features"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Features")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("empty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                experimental_features"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ExperimentalFeatures")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("disabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// WebGL no soporta todas las características de wgpu, así que si")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// estamos compilando para la web tendremos que deshabilitar algunas.")]),a._v("\n                required_limits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[a._v("cfg!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("target_arch "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"wasm32"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Limits")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("downlevel_webgl2_defaults")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("else")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Limits")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                memory_hints"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                trace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Trace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Off")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("await")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[a._v("El campo "),s("code",[a._v("required_features")]),a._v(" en "),s("code",[a._v("DeviceDescriptor")]),a._v(" nos permite especificar qué características extra queremos. Para este ejemplo simple, decidí no usar ninguna característica extra.")]),a._v(" "),s("div",{staticClass:"note"},[s("p",[a._v("La tarjeta gráfica que tienes limita las características que puedes usar. Si quieres usar ciertas características, es posible que tengas que limitar qué dispositivos soportas u ofrecer soluciones alternativas.")]),a._v(" "),s("p",[a._v("Puedes obtener una lista de características soportadas por tu dispositivo usando "),s("code",[a._v("adapter.features()")]),a._v(" o "),s("code",[a._v("device.features()")]),a._v(".")]),a._v(" "),s("p",[a._v("Puedes ver una lista completa de características "),s("a",{attrs:{href:"https://docs.rs/wgpu/latest/wgpu/struct.Features.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("aquí"),s("OutboundLink")],1),a._v(".")])]),a._v(" "),s("p",[a._v("El campo "),s("code",[a._v("experimental_features")]),a._v(" especifica si tenemos la intención de usar características que\naún no son estables. Dejaremos esto deshabilitado por ahora.")]),a._v(" "),s("p",[a._v("El campo "),s("code",[a._v("required_limits")]),a._v(" describe el límite de ciertos tipos de recursos que podemos crear. Usaremos los valores por defecto para este tutorial para que podamos soportar la mayoría de dispositivos. Puedes ver una lista de límites "),s("a",{attrs:{href:"https://docs.rs/wgpu/latest/wgpu/struct.Limits.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("aquí"),s("OutboundLink")],1),a._v(".")]),a._v(" "),s("p",[a._v("El campo "),s("code",[a._v("memory_hints")]),a._v(" proporciona al adaptador una estrategia de asignación de memoria preferida, si se soporta. Puedes ver las opciones disponibles "),s("a",{attrs:{href:"https://wgpu.rs/doc/wgpu/enum.MemoryHints.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("aquí"),s("OutboundLink")],1),a._v(".")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[a._v("        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" surface_caps "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" surface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("get_capabilities")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("adapter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// El código de shader en este tutorial asume una textura de superficie sRGB. Usar una diferente")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// resultará en que todos los colores salgan más oscuros. Si quieres soportar")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// superficies non-sRGB, necesitarás tenerlo en cuenta al dibujar al frame.")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" surface_format "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" surface_caps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("formats"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("iter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("find")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token closure-params"}},[s("span",{pre:!0,attrs:{class:"token closure-punctuation punctuation"}},[a._v("|")]),a._v("f"),s("span",{pre:!0,attrs:{class:"token closure-punctuation punctuation"}},[a._v("|")])]),a._v(" f"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("is_srgb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("copied")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("unwrap_or")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("surface_caps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("formats"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" config "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("SurfaceConfiguration")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            usage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TextureUsages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("RENDER_ATTACHMENT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            format"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" surface_format"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            width"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("width"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            height"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("height"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            present_mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" surface_caps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("present_modes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            alpha_mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" surface_caps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("alpha_modes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            view_formats"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token macro property"}},[a._v("vec!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            desired_maximum_frame_latency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[a._v("Aquí estamos definiendo una configuración para nuestra superficie. Esto definirá cómo la superficie crea sus "),s("code",[a._v("SurfaceTexture")]),a._v("s subyacentes. Hablaremos sobre "),s("code",[a._v("SurfaceTexture")]),a._v(" cuando lleguemos a la función "),s("code",[a._v("render")]),a._v(". Por ahora, hablemos sobre los campos de la configuración.")]),a._v(" "),s("p",[a._v("El campo "),s("code",[a._v("usage")]),a._v(" describe cómo se usarán los "),s("code",[a._v("SurfaceTexture")]),a._v("s. "),s("code",[a._v("RENDER_ATTACHMENT")]),a._v(" especifica que las texturas se usarán para escribir en la pantalla (hablaremos sobre más "),s("code",[a._v("TextureUsages")]),a._v(" más adelante).")]),a._v(" "),s("p",[a._v("El "),s("code",[a._v("format")]),a._v(" define cómo se almacenarán los "),s("code",[a._v("SurfaceTexture")]),a._v("s en la GPU. Podemos obtener un formato soportado de las "),s("code",[a._v("SurfaceCapabilities")]),a._v(".")]),a._v(" "),s("p",[s("code",[a._v("width")]),a._v(" y "),s("code",[a._v("height")]),a._v(" son el ancho y alto en píxeles de un "),s("code",[a._v("SurfaceTexture")]),a._v(". Esto generalmente debe ser el ancho y alto de la ventana.")]),a._v(" "),s("div",{staticClass:"warning"},[s("p",[a._v("Asegúrate de que el ancho y alto del "),s("code",[a._v("SurfaceTexture")]),a._v(" no sean 0, ya que eso puede hacer que tu aplicación falle.")])]),a._v(" "),s("p",[s("code",[a._v("present_mode")]),a._v(" usa la enumeración "),s("code",[a._v("wgpu::PresentMode")]),a._v(", que determina cómo sincronizar la superficie con la pantalla. Por simplicidad, seleccionamos la primera opción disponible. Si no quieres selección en tiempo de ejecución, "),s("code",[a._v("PresentMode::Fifo")]),a._v(" limitará la velocidad de fotogramas a la velocidad de fotogramas de la pantalla. Esto es esencialmente VSync. Se garantiza que este modo sea soportado en todas las plataformas. Hay otras opciones, y puedes verlas todas "),s("a",{attrs:{href:"https://docs.rs/wgpu/latest/wgpu/enum.PresentMode.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("en la documentación"),s("OutboundLink")],1)]),a._v(" "),s("div",{staticClass:"note"},[s("p",[a._v("Si quieres permitir que tus usuarios elijan qué "),s("code",[a._v("PresentMode")]),a._v(" usar, puedes usar "),s("a",{attrs:{href:"https://docs.rs/wgpu/latest/wgpu/struct.SurfaceCapabilities.html#structfield.present_modes",target:"_blank",rel:"noopener noreferrer"}},[a._v("SurfaceCapabilities::present_modes"),s("OutboundLink")],1),a._v(" para obtener una lista de todos los "),s("code",[a._v("PresentMode")]),a._v("s que la superficie soporta:")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" modes "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("surface_caps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("present_modes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[a._v("De cualquier forma, "),s("code",[a._v("PresentMode::Fifo")]),a._v(" siempre será soportado, y "),s("code",[a._v("PresentMode::AutoVsync")]),a._v(" y "),s("code",[a._v("PresentMode::AutoNoVsync")]),a._v(" tienen soporte de fallback y por lo tanto funcionarán en todas las plataformas.")])]),a._v(" "),s("p",[s("code",[a._v("alpha_mode")]),a._v(" honestamente no es algo con lo que esté familiarizado. Creo que tiene algo que ver con ventanas transparentes, pero siéntete libre de abrir un pull request. Por ahora, usaremos el primer "),s("code",[a._v("AlphaMode")]),a._v(" en la lista dada por "),s("code",[a._v("surface_caps")]),a._v(".")]),a._v(" "),s("p",[s("code",[a._v("view_formats")]),a._v(" es una lista de "),s("code",[a._v("TextureFormat")]),a._v("s que puedes usar cuando creas "),s("code",[a._v("TextureView")]),a._v("s (cubriremos esos brevemente más adelante en este tutorial así como en más profundidad "),s("a",{attrs:{href:"../tutorial5-textures"}},[a._v("en el tutorial de texturas")]),a._v("). Al momento de escribir, esto significa que si tu superficie está en espacio de color sRGB, puedes crear una vista de textura que use un espacio de color lineal.")]),a._v(" "),s("p",[a._v("Ahora que hemos configurado nuestra superficie correctamente, podemos agregar estos nuevos campos al final del método. El campo "),s("code",[a._v("is_surface_configured")]),a._v(" se usará más adelante.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[a._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("async")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[a._v("new")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Arc")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Window")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("->")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("anyhow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Result")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("State")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// ...")]),a._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Ok")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("Self")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            surface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            is_surface_configured"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("h2",{attrs:{id:"resize"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resize"}},[a._v("#")]),a._v(" resize()")]),a._v(" "),s("p",[a._v("Si queremos soportar el redimensionamiento en nuestra aplicación, vamos a necesitar reconfigurar la "),s("code",[a._v("surface")]),a._v(" cada vez que cambie el tamaño de la ventana. Esa es la razón por la cual almacenamos el "),s("code",[a._v("size")]),a._v(" físico y la "),s("code",[a._v("config")]),a._v(" usada para configurar la "),s("code",[a._v("surface")]),a._v(". Con todo esto, el método resize es muy simple.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// impl State")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("pub")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[a._v("resize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("mut")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" width"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("u32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" height"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("u32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" width "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" height "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("width "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" width"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("height "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" height"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("surface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("is_surface_configured "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("Aquí es donde configuramos la "),s("code",[a._v("surface")]),a._v(". Necesitamos que la superficie esté configurada antes de poder hacer nada con ella. Establecemos el indicador "),s("code",[a._v("is_surface_configured")]),a._v(" a true aquí y lo verificaremos en la función "),s("code",[a._v("render()")]),a._v(".")]),a._v(" "),s("h2",{attrs:{id:"handle-key"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#handle-key"}},[a._v("#")]),a._v(" handle_key()")]),a._v(" "),s("p",[a._v("Aquí es donde manejaremos los eventos de teclado. Actualmente solo queremos salir de la aplicación cuando se presione la tecla Escape. Haremos otras cosas más adelante.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// impl State")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[a._v("handle_key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" event_loop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ActiveEventLoop")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("KeyCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" is_pressed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("bool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("match")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" is_pressed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("KeyCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Escape")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" event_loop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("exit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        _ "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("Necesitaremos llamar a nuestra nueva función "),s("code",[a._v("handle_key()")]),a._v(" en la función "),s("code",[a._v("window_event()")]),a._v(" en "),s("code",[a._v("App")]),a._v(".")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("impl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ApplicationHandler")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("State")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("App")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// ...")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[a._v("window_event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("mut")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        event_loop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ActiveEventLoop")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        _window_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("winit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),a._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("WindowId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("WindowEvent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("match")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("mut")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("state "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Some")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("canvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" canvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("None")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("match")]),a._v(" event "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// ...")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("WindowEvent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("KeyboardInput")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("KeyEvent")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                        physical_key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("PhysicalKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Code")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                        state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" key_state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("handle_key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("event_loop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" key_state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("is_pressed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            _ "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("h2",{attrs:{id:"update"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#update"}},[a._v("#")]),a._v(" update()")]),a._v(" "),s("p",[a._v("No tenemos nada que actualizar aún, así que dejamos el método vacío.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[a._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("mut")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// elimina `todo!()`")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("Agregaremos código aquí más adelante para mover objetos alrededor.")]),a._v(" "),s("h2",{attrs:{id:"render"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#render"}},[a._v("#")]),a._v(" render()")]),a._v(" "),s("p",[a._v("Aquí es donde ocurre la magia. Primero, necesitamos obtener un frame para renderizar.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// impl State")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[a._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("mut")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("->")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Result")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("SurfaceError")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("request_redraw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// No podemos renderizar a menos que la superficie esté configurada")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("is_surface_configured "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Ok")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" output "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("surface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("get_current_texture")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[a._v("La función "),s("code",[a._v("get_current_texture")]),a._v(" esperará a que la "),s("code",[a._v("surface")]),a._v(" proporcione un nuevo "),s("code",[a._v("SurfaceTexture")]),a._v(" que renderizaremos. Almacenaremos esto en "),s("code",[a._v("output")]),a._v(" para más adelante.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[a._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" view "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("texture"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("create_view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TextureViewDescriptor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[a._v("Esta línea crea una "),s("code",[a._v("TextureView")]),a._v(" con configuración por defecto. Necesitamos hacer esto porque queremos controlar cómo el código de renderizado interactúa con la textura.")]),a._v(" "),s("p",[a._v("También necesitamos crear un "),s("code",[a._v("CommandEncoder")]),a._v(" para crear los comandos reales a enviar a la GPU. La mayoría de los frameworks gráficos modernos esperan que los comandos se almacenen en un buffer de comandos antes de ser enviados a la GPU. El "),s("code",[a._v("encoder")]),a._v(" construye un buffer de comandos que luego podemos enviar a la GPU.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[a._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("mut")]),a._v(" encoder "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("device"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("create_command_encoder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("CommandEncoderDescriptor")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        label"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Some")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Render Encoder"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[a._v("Ahora podemos proceder a limpiar la pantalla (algo que ha tardado mucho en llegar). Necesitamos usar el "),s("code",[a._v("encoder")]),a._v(" para crear un "),s("code",[a._v("RenderPass")]),a._v(". El "),s("code",[a._v("RenderPass")]),a._v(" tiene todos los métodos para el dibujo real. El código para crear un "),s("code",[a._v("RenderPass")]),a._v(" está un poco anidado, así que lo copiaré aquí antes de hablar sobre sus partes.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[a._v("    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" _render_pass "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" encoder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("begin_render_pass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("RenderPassDescriptor")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            label"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Some")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Render Pass"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            color_attachments"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Some")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("RenderPassColorAttachment")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                view"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("view"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                resolve_target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("None")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                ops"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Operations")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                    load"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("LoadOp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Clear")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Color")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                        r"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                        g"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                        b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                        a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                    store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("StoreOp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Store")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            depth_stencil_attachment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("None")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            occlusion_query_set"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("None")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            timestamp_writes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("None")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// submit will accept anything that implements IntoIter")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("submit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("std"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),a._v("iter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("once")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("encoder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("finish")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("present")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Ok")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("Lo primero es lo primero, hablemos sobre el bloque extra ("),s("code",[a._v("{}")]),a._v(") alrededor de "),s("code",[a._v("encoder.begin_render_pass(...)")]),a._v(". "),s("code",[a._v("begin_render_pass()")]),a._v(" toma prestado "),s("code",[a._v("encoder")]),a._v(" de forma mutable (es decir, "),s("code",[a._v("&mut self")]),a._v("). No podemos llamar a "),s("code",[a._v("encoder.finish()")]),a._v(" hasta que liberemos ese préstamo mutable. El bloque le dice a Rust que elimine cualquier variable dentro de él cuando el código sale de ese ámbito, liberando así el préstamo mutable en "),s("code",[a._v("encoder")]),a._v(" y permitiéndonos hacer "),s("code",[a._v("finish()")]),a._v(". Si no te gusta el "),s("code",[a._v("{}")]),a._v(", también puedes usar "),s("code",[a._v("drop(render_pass)")]),a._v(" para lograr el mismo efecto.")]),a._v(" "),s("p",[a._v("Las últimas líneas del código le dicen a "),s("code",[a._v("wgpu")]),a._v(" que termine el buffer de comandos y lo envíe a la cola de renderizado de la GPU.")]),a._v(" "),s("p",[a._v("Necesitamos actualizar el event loop nuevamente para llamar a este método. También llamaremos a "),s("code",[a._v("update()")]),a._v(" antes de él.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// run()")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function-definition function"}},[a._v("window_event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("mut")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        event_loop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ActiveEventLoop")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        _window_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("winit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),a._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("WindowId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("WindowEvent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("match")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("mut")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("state "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Some")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("canvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" canvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("None")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("match")]),a._v(" event "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// ...")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("WindowEvent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("RedrawRequested")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("match")]),a._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Ok")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("_"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Reconfigura la superficie si está perdida u obsoleta")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("SurfaceError")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Lost")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("SurfaceError")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Outdated")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" size "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("inner_size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n                        state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("resize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("width"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("height"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n                        "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token macro property"}},[a._v("error!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Unable to render {}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// ...")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("Con todo eso, deberías obtener algo que se vea así.")]),a._v(" "),s("p",[s("img",{attrs:{src:t(328),alt:"Ventana con fondo azul"}})]),a._v(" "),s("h2",{attrs:{id:"espera-¿que-esta-sucediendo-con-renderpassdescriptor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#espera-¿que-esta-sucediendo-con-renderpassdescriptor"}},[a._v("#")]),a._v(" Espera, ¿qué está sucediendo con RenderPassDescriptor?")]),a._v(" "),s("p",[a._v("Algunos de ustedes podrían ser capaces de decir qué está sucediendo solo mirándolo, pero sería negligente si no lo revisara. Echemos un vistazo al código nuevamente.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("RenderPassDescriptor")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    label"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Some")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Render Pass"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    color_attachments"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// ...")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    depth_stencil_attachment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("None")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("Un "),s("code",[a._v("RenderPassDescriptor")]),a._v(" solo tiene tres campos: "),s("code",[a._v("label")]),a._v(", "),s("code",[a._v("color_attachments")]),a._v(" y "),s("code",[a._v("depth_stencil_attachment")]),a._v(". Los "),s("code",[a._v("color_attachments")]),a._v(" describen dónde vamos a dibujar nuestro color. Usamos la "),s("code",[a._v("TextureView")]),a._v(" que creamos anteriormente para asegurarnos de que renderizamos a la pantalla.")]),a._v(" "),s("div",{staticClass:"note"},[s("p",[a._v("El campo "),s("code",[a._v("color_attachments")]),a._v(' es un arreglo "sparse". Esto te permite usar un pipeline que espera múltiples render targets y solo suministrar los que te importan.')])]),a._v(" "),s("p",[a._v("Usaremos "),s("code",[a._v("depth_stencil_attachment")]),a._v(" más adelante, pero lo estableceremos en "),s("code",[a._v("None")]),a._v(" por ahora.")]),a._v(" "),s("div",{staticClass:"language-rust extra-class"},[s("pre",{pre:!0,attrs:{class:"language-rust"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Some")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("RenderPassColorAttachment")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    view"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("view"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    resolve_target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("None")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    ops"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Operations")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        load"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("LoadOp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Clear")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Color")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            r"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            g"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wgpu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("StoreOp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("::")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Store")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("p",[a._v("El "),s("code",[a._v("RenderPassColorAttachment")]),a._v(" tiene el campo "),s("code",[a._v("view")]),a._v(", que informa a "),s("code",[a._v("wgpu")]),a._v(" qué textura usar para guardar los colores. En este caso, especificamos la "),s("code",[a._v("view")]),a._v(" que creamos usando "),s("code",[a._v("surface.get_current_texture()")]),a._v(". Esto significa que cualquier color que dibujemos en este attachment será dibujado en la pantalla.")]),a._v(" "),s("p",[a._v("El "),s("code",[a._v("resolve_target")]),a._v(" es la textura que recibirá la salida resuelta. Será lo mismo que "),s("code",[a._v("view")]),a._v(" a menos que el multisampling esté habilitado. No necesitamos especificar esto, así que lo dejamos en "),s("code",[a._v("None")]),a._v(".")]),a._v(" "),s("p",[a._v("El campo "),s("code",[a._v("ops")]),a._v(" toma un objeto "),s("code",[a._v("wgpu::Operations")]),a._v(". Esto le dice a wgpu qué hacer con los colores en la pantalla (especificados por "),s("code",[a._v("view")]),a._v("). El campo "),s("code",[a._v("load")]),a._v(" le dice a wgpu cómo manejar los colores almacenados del frame anterior. Actualmente, estamos limpiando la pantalla con un color azulado. El campo "),s("code",[a._v("store")]),a._v(" le dice a wgpu si queremos almacenar los resultados renderizados en la "),s("code",[a._v("Texture")]),a._v(" detrás de nuestra "),s("code",[a._v("TextureView")]),a._v(" (en este caso, es el "),s("code",[a._v("SurfaceTexture")]),a._v("). Usamos "),s("code",[a._v("StoreOp::Store")]),a._v(" porque queremos almacenar nuestros resultados de renderizado.")]),a._v(" "),s("div",{staticClass:"note"},[s("p",[a._v("No es raro no limpiar la pantalla si la pantalla va a estar completamente cubierta por objetos. Sin embargo, si tu escena no cubre toda la pantalla, puedes terminar con algo como esto.")]),a._v(" "),s("p",[s("img",{attrs:{src:t(329),alt:"./no-clear.png"}})])]),a._v(" "),s("h2",{attrs:{id:"errores-de-validacion"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#errores-de-validacion"}},[a._v("#")]),a._v(" Errores de validación?")]),a._v(" "),s("p",[a._v("Si wgpu está usando Vulkan en tu máquina, es posible que encuentres errores de validación si estás ejecutando una versión anterior del SDK de Vulkan. Deberías estar usando al menos la versión "),s("code",[a._v("1.2.182")]),a._v(" ya que las versiones antiguas pueden generar algunos falsos positivos. Si los errores persisten, es posible que hayas encontrado un bug en wgpu. Puedes publicar un issue en "),s("a",{attrs:{href:"https://github.com/gfx-rs/wgpu",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/gfx-rs/wgpu"),s("OutboundLink")],1)]),a._v(" "),s("h2",{attrs:{id:"demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#demo"}},[a._v("#")]),a._v(" Demo")]),a._v(" "),s("WasmExample",{attrs:{example:"tutorial2_surface"}}),a._v(" "),s("AutoGithubLink"),a._v(" "),s("h2",{attrs:{id:"desafio"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#desafio"}},[a._v("#")]),a._v(" Desafío")]),a._v(" "),s("p",[a._v("Crea un método "),s("code",[a._v("handle_mouse_moved()")]),a._v(" para capturar eventos del ratón, y actualiza el color de limpieza usando eso. "),s("em",[a._v("Pista: probablemente necesitarás usar "),s("code",[a._v("WindowEvent::CursorMoved")])]),a._v(".")])],1)}),[],!1,null,null,null);s.default=e.exports}}]);